# Taidon — Ключевые тезисы (Core)

## I. Проблема: Database Statefulness

1. Реляционные базы данных не только отвечают на запросы, но и изменяют своё состояние, что усложняет обучение, тестирование, эксперименты и CI/CD.
2. Необратимость изменений создаёт проблемы:
   - **Обучение**: ошибка в запросе может «убить» учебную БД; параллельное обучение требует множества отдельных копий.
   - **Тестирование**: сложно откатываться на произвольные состояния, трудно воспроизводить цепочки изменений.
   - **Эксперименты и бенчмарки**: подготовка данных дорога, сложно гарантировать идентичность условий.
   - **Выпуск продуктов**: миграции, CI/CD и интеграционные тесты страдают без воспроизводимой среды.
3. Существующие СУБД плохо поддерживают массовые параллельные песочницы: снапшоты тяжёлые, изоляция дорогая.

## II. Основная идея: умное версионирование цепочек запросов

4. Taidon рассматривает **цепочку SQL-запросов как детерминированное описание состояния базы данных**.
5. Допущение MVP: недетерминизм можно игнорировать; при необходимости пользователь может указывать точки истинного недетерминизма.
6. Пользователь работает с **иерархически организованным проектом SQL-скриптов**, который интерпретируется как дерево состояний.

## III. Архитектурная модель: Детерминистический движок воспроизведения SQL

7. Цепочка запросов разбивается на _head_ (последний запрос) и _tail_ (все предыдущие).
8. Tail хешируется; система проверяет, есть ли готовый снапшот в кэше.
9. Если снапшот найден — он мгновенно поднимается, и выполняется head.
10. Если нет — рекурсивно восстанавливается tail, создаётся новый снапшот, и по хэшу всей цепочки он сохраняется.
11. Система автоматически поддерживает **ветвящиеся истории**: ветки с общим prefix разделяют ранние состояния.

## IV. Снэпшоты: Использование Существующих Контейнерных Механизмов

12. Taidon не создаёт собственный storage-движок, а использует готовые технологии: copy-on-write FS, snapshotting, delta-слои.
13. Главное требование: **минимальное время поднятия окружения**.
14. Возможна гибридная стратегия хранения: дельта + периодическая материализация.
15. Подход к дельтам будет уточняться в процессе исследований.

## V. Интеллектуальная политика кэша

16. Кэш учитывает:
    - стоимость хранения,
    - стоимость пересоздания (время, ресурсы),
    - частоту обращений.
17. Система приоритизирует тяжёлые init-скрипты, позволяя использовать их результаты многократно.
18. В будущем возможна оптимизация через склейку дельт.

## VI. Платформенный UX

19. MVP скрывает внутреннюю механику; пользователь просто «выполняет SQL-скрипты».
20. Версии и снапшоты скрыты по умолчанию и доступны через API / Pro-режим.
21. Пользователь не работает с контейнерами напрямую.
22. Есть возможность управлять структурой проекта: init/, seed/, test/, bench/ и т.д.

## VII. SQL-совместимость и ограничения MVP

23. Основной движок MVP — коробочный PostgreSQL.
24. SQL — полный, промышленный, без эмулятора.
25. Один пользователь = одна песочница.
26. Внешние расширения — только встроенные (в будущем возможны варианты).
27. Схема управляется только через SQL-цепочки; исходное состояние — пустая или заранее подготовленная БД.

## VIII. Целевая Аудитория

28. Первичная: разработчики SQL-heavy backend’ов.
29. Вторичные: учебные платформы, аналитики, CI/CD.

## IX. Главные Ценности Продукта

30. **Instant setup** — работа за секунды, без развёртываний.
31. **Воспроизводимость** — точное восстановление состояния на любой момент.
32. **Масштабируемость обучения** — сотни параллельных песочниц без дублирования данных.
33. **Бесстрашие пользователя** — экспериментируй без риска.
34. **Интерактивность** — точные сообщения об ошибках и анализ SQL.

## X. Ключевые Отличия Taidon от Аналогов

35. Не клонирование баз, а **вычисление состояния из детерминированной цепочки запросов**.
36. Не пересоздание данных, а **умный кэш init-процедур**.
37. Не разрозненные песочницы для каждого пользователя, а **оптимальное хранение версионных состояний**.
38. Не SQL-playground, а **реплицируемая платформа для проектов с ветвлением историй**.
39. Не эмуляция SQL, а **реальный PostgreSQL под управлением orchestration-движка**.
